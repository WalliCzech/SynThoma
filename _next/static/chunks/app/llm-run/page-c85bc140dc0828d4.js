(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[498],{5726:function(t,e,n){Promise.resolve().then(n.bind(n,550))},550:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return o}});var i=n(1514),s=n(7993),r=n(3069);function o(){var t;let e=(r.env.NEXT_PUBLIC_API_BASE||"").replace(/\/$/,""),[n,o]=(0,s.useState)({runId:"run-".concat(Date.now()),visited:[],mbtiBias:{E:0,I:0,N:0,S:0,T:0,F:0,P:0,J:0},theme:"acid-glitch",hp:100,sanity:80,access:0,score:0,lastChoice:null}),[l,a]=(0,s.useState)(null),[c,u]=(0,s.useState)(!1),[d,v]=(0,s.useState)(null);async function m(t){u(!0),v(null);try{let n=await fetch("".concat(e,"/api/run"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(!n.ok)throw Error("API ".concat(n.status,": ").concat(await n.text()));let i=await n.json();a(i)}catch(t){var n;v(String(null!==(n=t.message)&&void 0!==n?n:t))}finally{u(!1)}}async function h(t){let e={...n,visited:l?[...n.visited,l.id]:n.visited,lastChoice:{id:t.id}};!function(t){if(!(null==t?void 0:t.effects))return;let e=t.effects;o(t=>{var n,i,s,r,o,l,a,c,u,d,v,m,h,f,p,y,b,g,x,T;return{...t,hp:Math.max(0,t.hp+(null!==(u=e.hp)&&void 0!==u?u:0)),sanity:Math.max(0,t.sanity+(null!==(d=e.sanity)&&void 0!==d?d:0)),access:t.access+(null!==(v=e.access)&&void 0!==v?v:0),score:t.score+(null!==(m=e.score)&&void 0!==m?m:0),mbtiBias:{E:t.mbtiBias.E+(null!==(h=null===(n=e.mbti)||void 0===n?void 0:n.E)&&void 0!==h?h:0),I:t.mbtiBias.I+(null!==(f=null===(i=e.mbti)||void 0===i?void 0:i.I)&&void 0!==f?f:0),N:t.mbtiBias.N+(null!==(p=null===(s=e.mbti)||void 0===s?void 0:s.N)&&void 0!==p?p:0),S:t.mbtiBias.S+(null!==(y=null===(r=e.mbti)||void 0===r?void 0:r.S)&&void 0!==y?y:0),T:t.mbtiBias.T+(null!==(b=null===(o=e.mbti)||void 0===o?void 0:o.T)&&void 0!==b?b:0),F:t.mbtiBias.F+(null!==(g=null===(l=e.mbti)||void 0===l?void 0:l.F)&&void 0!==g?g:0),P:t.mbtiBias.P+(null!==(x=null===(a=e.mbti)||void 0===a?void 0:a.P)&&void 0!==x?x:0),J:t.mbtiBias.J+(null!==(T=null===(c=e.mbti)||void 0===c?void 0:c.J)&&void 0!==T?T:0)}}})}(t),await m(e),o(t=>({...e,hp:t.hp,sanity:t.sanity,access:t.access,score:t.score,mbtiBias:t.mbtiBias}))}return(0,s.useEffect)(()=>{m(n)},[]),(0,i.jsxs)("div",{className:"SYNTHOMAREADER panel crt fog",style:{position:"relative",zIndex:10,margin:"64px auto",maxWidth:900},children:[(0,i.jsx)("h1",{className:"glitch-master title",style:{margin:0},children:"S Y N T H O M A \xb7 LLM"}),(0,i.jsxs)("div",{className:"text",style:{opacity:.8,fontSize:"0.9rem",margin:"0.25rem 0 0.75rem"},children:["hp ",n.hp," \xb7 sanity ",n.sanity," \xb7 access ",n.access," \xb7 score ",n.score]}),(0,i.jsxs)("div",{className:"reader-controls appear visible",style:{display:"flex",gap:8},children:[(0,i.jsx)("button",{className:"btn btn-lg",onClick:()=>m(n),children:"↻ Znovu vygenerovat"}),(0,i.jsx)("button",{className:"btn btn-lg",onClick:()=>{let t={runId:"run-".concat(Date.now()),visited:[],mbtiBias:{E:0,I:0,N:0,S:0,T:0,F:0,P:0,J:0},theme:"acid-glitch",hp:100,sanity:80,access:0,score:0,lastChoice:null};o(t),m(t)},children:"✦ Nov\xfd běh"})]}),c&&(0,i.jsx)("div",{className:"text",children:"…generuji uzel… (model šept\xe1 temnotě)"}),d&&(0,i.jsxs)("div",{className:"text",style:{color:"#f55"},children:["Chyba: ",d]}),l&&(0,i.jsxs)("div",{style:{marginTop:8},children:[null===(t=l.fragments)||void 0===t?void 0:t.map((t,e)=>(0,i.jsx)("div",{className:"text",dangerouslySetInnerHTML:{__html:t.html}},e)),(0,i.jsx)("div",{style:{display:"grid",gap:8,marginTop:8},children:l.options&&l.options.length>0?l.options.map(t=>(0,i.jsx)("button",{className:"btn btn-lg",style:{textAlign:"left"},onClick:()=>h(t),children:t.label},t.id)):(0,i.jsx)("div",{className:"text",style:{opacity:.7},children:"— Ž\xe1dn\xe9 možnosti. Zkuste znovu vygenerovat —"})}),(0,i.jsxs)("details",{className:"panel",style:{marginTop:12},children:[(0,i.jsx)("summary",{children:"Debug JSON (co vr\xe1tilo API)"}),(0,i.jsxs)("pre",{style:{whiteSpace:"pre-wrap"},children:[" ",JSON.stringify(l,null,2)," "]})]})]}),!l&&!c&&!d&&(0,i.jsx)("div",{className:"text",style:{opacity:.8,marginTop:8},children:"…ček\xe1m na prvn\xed uzel… Pokud se nic neděje, klikni na „Znovu vygenerovat“ nahoře."})]})}},3069:function(t,e,n){"use strict";var i,s;t.exports=(null==(i=n.g.process)?void 0:i.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(7030)},7030:function(t){!function(){var e={229:function(t){var e,n,i,s=t.exports={};function r(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function l(t){if(e===setTimeout)return setTimeout(t,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:r}catch(t){e=r}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var a=[],c=!1,u=-1;function d(){c&&i&&(c=!1,i.length?a=i.concat(a):u=-1,a.length&&v())}function v(){if(!c){var t=l(d);c=!0;for(var e=a.length;e;){for(i=a,a=[];++u<e;)i&&i[u].run();u=-1,e=a.length}i=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function h(){}s.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new m(t,e)),1!==a.length||c||l(v)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=h,s.addListener=h,s.once=h,s.off=h,s.removeListener=h,s.removeAllListeners=h,s.emit=h,s.prependListener=h,s.prependOnceListener=h,s.listeners=function(t){return[]},s.binding=function(t){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function i(t){var s=n[t];if(void 0!==s)return s.exports;var r=n[t]={exports:{}},o=!0;try{e[t](r,r.exports,i),o=!1}finally{o&&delete n[t]}return r.exports}i.ab="//";var s=i(229);t.exports=s}()}},function(t){t.O(0,[869,753,744],function(){return t(t.s=5726)}),_N_E=t.O()}]);